# Templates

So far in the lab exercises, we've primarily used the 'new-app' command to create many our OpenShift objects. However, all objects can be created and modified using YAML. Templates can be used to rapidly create multiple OpenShift objects from a single YAML file. This can be useful for testing your application in different environments (dev, test, prod) or for recreating similar applications. It is also helpful to use manifests and templates as a strategy for recovering from an incident. 

In this section, we'll create a template that includes all of the objects we've created for our rocketchat application and mongo database. 

## Get the YAML

We can use the `oc get` command to gather the YAML files that represent our OpenShift commands and their configuration. We need to collect the YAML for a variety of objects, which we can do with the following command: 

<!-- add buildconfig,imagestream from tools namespace-->
```
oc get deployment,dc,route,service,configmap,pvc,secrets -l app=rocketchat-[username] -o yaml > template.yaml
```

The command above will save the YAML definitions for these objects on your local machine in a file named `template.yaml`. 

## Remove unnecessary information

Explore the new file that you just created called `template.yaml`

We're now looking to strip unique information generated by OpenShift from the YAML to allow it to be reusable. Search for each of these fields and remove their contents from your `template.yaml` then save it: 

- annotations 
- status
- clusterIP
- clusterIPs
- generation
- uid
- resourceVersion
- creationTimestamp

## Adjusting some more fields 

In order to tell OpenShift that we're creating a YAML file that should be used as a template, we need to make some more changes to our `template.yaml` file. 

1. On the first line, replace  `apiVersion: v1` with `apiVersion: template.openshift.io/v1`
2. On the second line, add a new field: `kind: Template` and then rename the `items:` field to `objects:`
3. Remove `kind: List`

We can add a new field called 'parameters' near the beginning of our yaml file, above  `objects`. Replace `[username]` with your username. 

```
parameters: 
  - name: OWNER
    required: true
    value: '[username]'
  - name: APP_NAMESPACE
    required: true
    value: 'dev'
```
Next, let's search through the file for the places where our username or namespace suffix is being used and replace them with `${OWNER}` and `${APP_NAMESPACE}`. This way, in the future we can just make changes to a parameter values and they'll be applied throughout our template. Be sure to check carefully, don't just find and replace all! Be sure to savel your `template.yaml` file. 

